<!doctype html>
<html>

<head>
    <meta charset="utf-8">

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PN39N8V');</script>

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>How To Use Application Monitoring With Paketo Buildpacks - Paketo Buildpacks</title>
<meta name="viewport" content="width=device-width, initial-scale=1 viewport-fit=cover">




<meta name="og:site_name" content="Paketo Buildpacks">
<meta name="og:title" content="How To Use Application Monitoring With Paketo Buildpacks">
<meta name="og:url" content="https://paketo.io/docs/howto/app-monitor/">
<meta name="twitter:title" content="Paketo Buildpacks" />
<meta name="twitter:url" content="https://paketo.io/docs/howto/app-monitor/" />
<meta name="twitter:card" content="" />



<link rel="stylesheet" href="/css/main.min.5065f2eb0bff7adbb4973defffbefccad8615f9cb38732792628a4f561e3b678.css">

</head>

<body>
    
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PN39N8V"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    

    <div id="header-skip-link" class="screenreader-container">
    <a href="#title" class="screenreader-text">Skip to Content</a>
</div>

    




<header class="header--narrow">
    
    <a class="paketo-p-logo" href="/">
        <img class="paketo-p-logo__image" src="/v2/images/logo-paketo-p.svg" alt="Paketo Buildpacks Homepage">
    </a>
    
    <div id="navigation" class="right-overlay">
        <div class="nav-opener">
            <span class="nav-opener__bar nav-opener__bar-top"></span>
            <span class="nav-opener__bar nav-opener__bar-middle"></span>
            <span class="nav-opener__bar nav-opener__bar-bottom"></span>
        </div>
        <div class="nav-container" id="nav-container">
            <nav class="nav" id="nav-tray" >
                <div class="nav__linkarea text--400">
                    <a class="nav-link" href="/docs">docs</a>
                    <a class="nav-link" href="/community">community</a>
                    <a class="nav-link" href="https://blog.paketo.io">blog</a>
                    <a class="nav-link" href="https://github.com/paketo-buildpacks">github</a>
                </div>
            </nav>
        </div>
    </div>
    <div class="desktop-nav">
        
        
        
        <a class="nav-link nav-link--desktop  nav-link--desktop--active" href="/docs">docs</a>
        
        <a class="nav-link nav-link--desktop   " href="/community">community</a>
        <a class="nav-link nav-link--desktop " href="https://blog.paketo.io">blog</a>
        <a class="nav-link nav-link--desktop " href="https://github.com/paketo-buildpacks">github</a>
    </div>
</header>


    <div class="docs">
    <div class="docs-sidebar">
        
<div id="docs-search" class="docs-search-container" data-app-id="8TYM3HS0CU" data-api-key="0bc69e542f0d93e17450f5984dd611c3" data-index="paketo"/></div>
<div class="docs-menu-container">
    <nav class="docs-menu">
        <ul class="docs-menu__top-level-list">
            
            
                
    
        <li class="docs-menu__leaf">
            <a href="/docs/" class="docs-menu__item docs-menu__link ">
                
                <span>Getting Started</span>
            </a>
        </li>
    
            
                
    
        <li class="docs-menu__item docs-menu__parent">
            
            <div class="docs-menu__section-header docs-menu__section-header--opened">
                
                <span>How To</span>
                <button class="expander-button expander-button--opened docs-menu__expander-button">
                    <svg class="expander-button__triangle expander-button__triangle--opened" width="38" height="34" viewBox="0 0 38 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.140625" width="37.0257" height="34" rx="8" fill="#888888" fill-opacity="0.25"/>
                        <path d="M28.1604 13H8.14648L18.6538 22.5L28.1604 13Z" fill="#FEFCFC"/>
                        </svg>
                </button>
            </div>
            
            <ul class="docs-menu__children-list docs-menu__children-list--opened">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/java/" class="docs-menu__item docs-menu__link ">
                
                <span>Java</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/nodejs/" class="docs-menu__item docs-menu__link ">
                
                <span>Node.js</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/dotnet-core/" class="docs-menu__item docs-menu__link ">
                
                <span>.NET Core</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/go/" class="docs-menu__item docs-menu__link ">
                
                <span>Go</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/web-servers/" class="docs-menu__item docs-menu__link ">
                
                <span>Web Servers</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/python/" class="docs-menu__item docs-menu__link ">
                
                <span>Python</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/php/" class="docs-menu__item docs-menu__link ">
                
                <span>PHP</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/ruby/" class="docs-menu__item docs-menu__link ">
                
                <span>Ruby</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/configuration/" class="docs-menu__item docs-menu__link ">
                
                <span>Configure Paketo Buildpacks</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/app-monitor/" class="docs-menu__item docs-menu__link docs-menu__link--active">
                
                <span>Enable Application Monitoring</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/create-paketo-buildpack/" class="docs-menu__item docs-menu__link ">
                
                <span>Create a Paketo Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/sbom/" class="docs-menu__item docs-menu__link ">
                
                <span>Access the SBOM</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/howto/create-custom-stack/" class="docs-menu__item docs-menu__link ">
                
                <span>Create a Custom Stack</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
            
                
    
        <li class="docs-menu__item docs-menu__parent">
            
            <div class="docs-menu__section-header ">
                
                <span>Concepts</span>
                <button class="expander-button  docs-menu__expander-button">
                    <svg class="expander-button__triangle " width="38" height="34" viewBox="0 0 38 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.140625" width="37.0257" height="34" rx="8" fill="#888888" fill-opacity="0.25"/>
                        <path d="M28.1604 13H8.14648L18.6538 22.5L28.1604 13Z" fill="#FEFCFC"/>
                        </svg>
                </button>
            </div>
            
            <ul class="docs-menu__children-list ">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/concepts/buildpacks/" class="docs-menu__item docs-menu__link ">
                
                <span>Buildpacks</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/concepts/builders/" class="docs-menu__item docs-menu__link ">
                
                <span>Builders</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/concepts/stacks/" class="docs-menu__item docs-menu__link ">
                
                <span>Stacks</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/concepts/sbom/" class="docs-menu__item docs-menu__link ">
                
                <span>Software Bill of Materials (SBOM)</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
            
                
    
        <li class="docs-menu__item docs-menu__parent">
            
            <div class="docs-menu__section-header ">
                
                <span>Reference</span>
                <button class="expander-button  docs-menu__expander-button">
                    <svg class="expander-button__triangle " width="38" height="34" viewBox="0 0 38 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.140625" width="37.0257" height="34" rx="8" fill="#888888" fill-opacity="0.25"/>
                        <path d="M28.1604 13H8.14648L18.6538 22.5L28.1604 13Z" fill="#FEFCFC"/>
                        </svg>
                </button>
            </div>
            
            <ul class="docs-menu__children-list ">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/httpd-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>HTTPD Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/dotnet-core-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>.NET Core Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/go-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Go Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/java-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Java Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/java-native-image-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Java Native Image Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/nginx-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>NGINX Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/nodejs-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Node.js Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/php-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>PHP Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/python-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Python Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/docs/reference/ruby-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Ruby Buildpack</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
            
        </ul>
    </nav>
</div>


    </div>
    <div class="docs-mobile-tab">
        <svg width="7" height="39" viewBox="0 0 7 39" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7 3.5C7 5.433 5.433 7 3.5 7C1.567 7 0 5.433 0 3.5C0 1.567 1.567 0 3.5 0C5.433 0 7 1.567 7 3.5Z" fill="#FEFCFC"/>
            <path d="M7 19.5C7 21.433 5.433 23 3.5 23C1.567 23 0 21.433 0 19.5C0 17.567 1.567 16 3.5 16C5.433 16 7 17.567 7 19.5Z" fill="#FEFCFC"/>
            <path d="M7 35.5C7 37.433 5.433 39 3.5 39C1.567 39 0 37.433 0 35.5C0 33.567 1.567 32 3.5 32C5.433 32 7 33.567 7 35.5Z" fill="#FEFCFC"/>
            </svg>
    </div>
    <div class="docs-body">
        <div class="docs-body__container">
            
  <a href="https://github.com/paketo-buildpacks/paketo-website/edit/main/content/docs/howto/app-monitor.md" target="_blank" class="github-edit" style="text-decoration:none">
    <div class="github-edit__content">
      <div class="github-edit__logo-container">
        <img class="github-edit__logo" src="/images/github-mark.png">
      </div>
        <div class="github-edit__text">Edit</div>
    </div>
</a>

            <h1 id="title">How To Use Application Monitoring With Paketo Buildpacks</h1>
            
<div class="docs-body__table-of-contents-container docs-body__table-of-contents-container--mobile">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#apache-skywalking">Apache Skywalking</a></li>
    <li><a href="#appdynamics">AppDynamics</a></li>
    <li><a href="#aternity">Aternity</a></li>
    <li><a href="#azure-application-insights">Azure Application Insights</a></li>
    <li><a href="#datadog">Datadog</a></li>
    <li><a href="#dynatrace">Dynatrace</a></li>
    <li><a href="#elastic-apm">Elastic APM</a></li>
    <li><a href="#google-stackdriver">Google Stackdriver</a>
      <ul>
        <li><a href="#stackdriver-debugger">Stackdriver Debugger</a></li>
        <li><a href="#stackdriver-profiler">Stackdriver Profiler</a></li>
      </ul>
    </li>
    <li><a href="#jprofiler">JProfiler</a>
      <ul>
        <li><a href="#connecting-with-jprofiler">Connecting with JProfiler</a></li>
      </ul>
    </li>
    <li><a href="#new-relic">New Relic</a></li>
    <li><a href="#yourkit">YourKit</a>
      <ul>
        <li><a href="#connecting-with-yourkit">Connecting with YourKit</a></li>
      </ul>
    </li>
    <li><a href="#examples">Examples</a>
      <ul>
        <li><a href="#example-prerequisites">Example Prerequisites</a></li>
        <li><a href="#example-with-a-binding">Example with a Binding</a></li>
        <li><a href="#example-with-an-environment-variable">Example with an Environment Variable</a></li>
        <li><a href="#apm-buildpacks-with-paketo-builders">APM Buildpacks with Paketo Builders</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>

            <div class="docs-body__markdown">
                <p>This documentation explains how to use the Paketo buildpacks to build applications that include application monitoring tools.</p>
<h2 id="apache-skywalking" class="markup-heading">
    <a class="markup-heading__link" href="#apache-skywalking">
        Apache Skywalking
    </a>
</h2><p>The <a href="https://skywalking.apache.org/">Apache Skywalking</a> integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a> through the <a href="https://github.com/paketo-buildpacks/apache-skywalking">Apache Skywalking Buildpack</a>. If a binding of the correct type, <code>ApacheSkyWalking</code>, is provided at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>Connection credentials will be read from the binding at runtime, with the binding secrets being transformed to system properties with the following the pattern <code>-Dskywalking.&lt;KEY&gt;=&lt;VALUE&gt;</code>.</p>
<p>The buildpack supports the Java language.</p>
<h2 id="appdynamics" class="markup-heading">
    <a class="markup-heading__link" href="#appdynamics">
        AppDynamics
    </a>
</h2><p>The <a href="https://www.appdynamics.com/">AppDynamics</a> integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a> through the <a href="https://github.com/paketo-buildpacks/appdynamics">AppDynamics Buildpack</a>. If a binding of the correct type, <code>AppDynamics</code>, is provided at build-time then an agent appropriate for the application will be contributed to the application image, as well as any required configuration files.</p>
<p>Connection credentials will be read from the binding at runtime, with the binding secrets being transformed to system properties with the following the pattern <code>APPDYNAMICS_&lt;KEY&gt;=&lt;VALUE&gt;</code>.</p>
<p>The buildpack supports the Java, Node.js &amp; PHP languages.</p>
<h2 id="aternity" class="markup-heading">
    <a class="markup-heading__link" href="#aternity">
        Aternity
    </a>
</h2><p>The <a href="https://www.aternity.com/application-performance-monitoring/">Aternity</a> integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a> through the <a href="https://github.com/paketo-buildpacks/aternity">Aternity Buildpack</a>. If a binding of the correct type, <code>AppInternals</code>, is provided at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>Connection credentials will be read from the binding at runtime, with the binding secrets being transformed to system properties with the following the pattern <code>&lt;KEY&gt;=&lt;VALUE&gt;</code>.</p>
<p>The buildpack supports the Java language.</p>
<h2 id="azure-application-insights" class="markup-heading">
    <a class="markup-heading__link" href="#azure-application-insights">
        Azure Application Insights
    </a>
</h2><p>The <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview">Azure Application Insights</a> integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a> through the <a href="https://github.com/paketo-buildpacks/azure-application-insights">Azure Application Insights Buildpack</a>. If a binding of the correct type, <code>ApplicationInsights</code>, is provided at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>Connection credentials will be read from the binding at runtime, with the binding secrets being transformed to system properties with the following the pattern <code>APPLICATIONINSIGHTS_&lt;KEY&gt;=&lt;VALUE&gt;</code>.</p>
<p>The buildpack supports the Java and Node.js languages.</p>
<h2 id="datadog" class="markup-heading">
    <a class="markup-heading__link" href="#datadog">
        Datadog
    </a>
</h2><p>The <a href="https://www.datadoghq.com/">Datadog</a> integration is enabled by setting an environment variable for the <a href="https://github.com/paketo-buildpacks/datadog">Datadog Buildpack</a>. If the environment variable <code>BP_DATADOG_ENABLED</code> is set to a truthy value (i.e. true, t, 1 ignoring case) at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>Datadog configuration is read from any of the standard Datadog environment variables that are set at runtime. This happens directly, the buildpack does not translate them. You can find the full list of configuration properties in the Datadog documentation <a href="https://docs.datadoghq.com/tracing/setup_overview/setup/java/?tab=containers#configuration">available here</a>.</p>
<p>The Datadog agent requires a side-car agent to be running in addition to the Java agent. This side-car agent runs outside of the buildpack generated image. The <a href="https://docs.datadoghq.com/tracing/setup_overview/setup/java/?tab=containers#configure-the-datadog-agent-for-apm">standard Datadog instructions for your container orchestrator of choice</a> can be used to install this agent. The Paketo team also has detailed instructions for <a href="https://github.com/paketo-buildpacks/datadog/blob/main/docs/">various runtimes available here</a>.</p>
<p>The buildpack supports the Java and Node.js languages.</p>
<h2 id="dynatrace" class="markup-heading">
    <a class="markup-heading__link" href="#dynatrace">
        Dynatrace
    </a>
</h2><p>The <a href="https://www.dynatrace.com/">Dynatrace</a> integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a> through the <a href="https://github.com/paketo-buildpacks/dynatrace">Dynatrace Buildpack</a>. If a binding of the correct type, <code>Dynatrace</code>, is provided at build-time then the Dynatrace OneAgent will be contributed to the application image, and <code>DT_TENANT</code>, <code>DT_TENANTTOKEN</code>, and <code>DT_CONNECTION_POINT</code> are set for launch time.</p>
<p>The binding must include the following required Secret values to successfully contribute Dynatrace:</p>
<ul>
<li>Either <code>api-url</code>, which is the base URL of the Dynatrace API or <code>environment-id</code>, which is a URL is configured in the form: <code>https://&lt;environment-id&gt;.live.dynatrace.com/api</code>.</li>
<li>An <code>api-token</code>, which is the token for communicating with the Dynatrace service.</li>
</ul>
<p>Any additional configuration information will be read from the binding at runtime, with the binding secrets being transformed to system properties with the following the pattern <code>DT_&lt;KEY&gt;=&lt;VALUE&gt;</code>.</p>
<p>The buildpack supports the .NET, Go, Java, NodeJS, and PHP languages, as well as the NGINX and Apache HTTPD servers.</p>
<h2 id="elastic-apm" class="markup-heading">
    <a class="markup-heading__link" href="#elastic-apm">
        Elastic APM
    </a>
</h2><p>The <a href="https://www.elastic.co/observability/application-performance-monitoring">Elastic APM</a> integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a> through the <a href="https://github.com/paketo-buildpacks/elastic-apm">Elastic APM Buildpack</a>. If a binding of the correct type, <code>ElasticAPM</code>, is provided at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>Connection credentials will be read from the binding at runtime, with the binding secrets being transformed to system properties with the following the pattern <code>ELASTIC_APM_&lt;KEY&gt;=&lt;VALUE&gt;</code>.</p>
<p>The buildpack supports the Java and Node.js languages.</p>
<h2 id="google-stackdriver" class="markup-heading">
    <a class="markup-heading__link" href="#google-stackdriver">
        Google Stackdriver
    </a>
</h2><p>The <a href="https://github.com/paketo-buildpacks/google-stackdriver">Google Stackdriver Buildpack</a> has two integrations, a <a href="https://cloud.google.com/debugger/docs">debugger</a> and a <a href="https://cloud.google.com/profiler/docs">profiler</a>, which are independently installed as requested by the user.</p>
<p>The buildpack supports the Java and Node.js languages.</p>
<h3 id="stackdriver-debugger" class="markup-heading">
    <a class="markup-heading__link" href="#stackdriver-debugger">
        Stackdriver Debugger
    </a>
</h3><p>The Stackdriver Debugger integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a>. If a binding of the correct type, <code>StackdriverDebugger</code>, is provided at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>The <code>GOOGLE_APPLICATION_CREDENTIALS</code> is set to the path of the <code>ApplicationCredentials</code> secret.</p>
<h3 id="stackdriver-profiler" class="markup-heading">
    <a class="markup-heading__link" href="#stackdriver-profiler">
        Stackdriver Profiler
    </a>
</h3><p>The Stackdriver Debugger integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a>. If a binding of the correct type, <code>StackdriverProfiler</code>, is provided at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>The <code>GOOGLE_APPLICATION_CREDENTIALS</code> is set to the path of the <code>ApplicationCredentials</code> secret.</p>
<h2 id="jprofiler" class="markup-heading">
    <a class="markup-heading__link" href="#jprofiler">
        JProfiler
    </a>
</h2><p>The <a href="https://www.ej-technologies.com/products/jprofiler/overview.html">JProfiler</a> profiler integration is enabled by setting an environment variable for the <a href="https://github.com/paketo-buildpacks/jprofiler">JProfiler Buildpack</a>. If the environment variable <code>BP_JPROFILER_ENABLED</code> is set to a truthy value (i.e. true, t, 1 ignoring case) at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>Once contributed to an application image, the JProfiler support can be toggled on/off by setting <code>BPL_JPROFILER_ENABLED</code> to a true or false value at runtime. Additionally, <code>BPL_JPROFILER_PORT</code> can be set at runtime to customize the port on which the agent listens, defaults to 8849, and <code>BPL_JPROFILER_NOWAIT</code> can be set to control if the JVM will execute before JProfiler attaches to the process, defaults to true.</p>
<p>The buildpack supports the Java language.</p>
<h3 id="connecting-with-jprofiler" class="markup-heading">
    <a class="markup-heading__link" href="#connecting-with-jprofiler">
        Connecting with JProfiler
    </a>
</h3><p>JProfiler, which runs on your local computer, must connect to a listening port within your container. When starting an application with debugging enabled, a port must be published.</p>
<p>To publish the port in Docker, use the following command:</p>
<div class="copyable">
    <pre class="copyable__code">$ docker run --publish &lt;LOCAL_PORT&gt;:&lt;REMOTE_PORT&gt; ...
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
<p>The <code>REMOTE_PORT</code> should match the <code>port</code> configuration for the application (<code>8849</code> by default).  The <code>LOCAL_PORT</code> can be any open port on your computer, but typically matches the <code>REMOTE_PORT</code> where possible.</p>
<p>Once the port has been published, your JProfiler Profiler, running on your local computer, should connect to <code>localhost:&lt;LOCAL_PORT&gt;</code> for profiling.</p>
<p><img src="https://raw.githubusercontent.com/paketo-buildpacks/jprofiler/main/jprofiler.png" alt="JProfiler Configuration"></p>
<h2 id="new-relic" class="markup-heading">
    <a class="markup-heading__link" href="#new-relic">
        New Relic
    </a>
</h2><p>The <a href="https://newrelic.com/">New Relic</a> integration is enabled with <a href="https://paketo.io/docs/howto/configuration/#bindings">bindings</a> through the <a href="https://github.com/paketo-buildpacks/new-relic">New Relic Buildpack</a>. If a binding of the correct type, <code>NewRelic</code>, is provided at build-time then an agent appropriate for the application will be contributed to the application image, as well as any required configuration files.</p>
<p>Connection credentials will be read from the binding at runtime, with the binding secrets being transformed to system properties with the following the pattern <code>NEW_RELIC_&lt;KEY&gt;=&lt;VALUE&gt;</code>.</p>
<p>The buildpack supports the Java, Node.js and PHP languages.</p>
<h2 id="yourkit" class="markup-heading">
    <a class="markup-heading__link" href="#yourkit">
        YourKit
    </a>
</h2><p>The <a href="https://www.yourkit.com/">YourKit</a> profiler integration is enabled by setting an environment variable for the <a href="https://github.com/paketo-buildpacks/yourkit">YourKit buildpack</a>. If the environment variable <code>BP_YOURKIT_ENABLED</code> is set to a truthy value (i.e. true, t, 1 ignoring case) at build-time then an agent appropriate for the application will be contributed to the application image.</p>
<p>Once contributed to an application image, the JProfiler support can be toggled on/off by setting <code>BPL_YOURKIT_ENABLED</code> to a true or false value at runtime. Additionally, <code>BPL_YOURKIT_PORT</code> can be set at runtime to customize the port on which the agent listens, defaults to 10001, and <code>BPL_YOURKIT_SESSION_NAME</code> can be used to set the session name.</p>
<p>The buildpack supports the Java language.</p>
<h3 id="connecting-with-yourkit" class="markup-heading">
    <a class="markup-heading__link" href="#connecting-with-yourkit">
        Connecting with YourKit
    </a>
</h3><p>YourKit, which runs on your local computer, must connect to a listening port within your container. When starting an application with debugging enabled, a port must be published.</p>
<p>To publish the port in Docker, use the following command:</p>
<div class="copyable">
    <pre class="copyable__code">$ docker run --publish &lt;LOCAL_PORT&gt;:&lt;REMOTE_PORT&gt; ...
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
<p>The <code>REMOTE_PORT</code> should match the <code>port</code> configuration for the application (<code>10001</code> by default).  The <code>LOCAL_PORT</code> can be any open port on your computer, but typically matches the <code>REMOTE_PORT</code> where possible.</p>
<p>Once the port has been published, your YourKit Profiler, running on your local computer, should connect to <code>localhost:&lt;LOCAL_PORT&gt;</code> for profiling.</p>
<p><img src="https://raw.githubusercontent.com/paketo-buildpacks/yourkit/main/yourkit.png" alt="YourKit Configuration"></p>
<h2 id="examples" class="markup-heading">
    <a class="markup-heading__link" href="#examples">
        Examples
    </a>
</h2><p>The following examples show how to use Paketo APM buildpacks with your applications. The examples are broken down into two different types, those that require a binding and those that require an environment variable. Check the buildpack for your APM tool of choice to see if it requires a binding or an environment variable and follow the appropriate instructions.</p>
<h3 id="example-prerequisites" class="markup-heading">
    <a class="markup-heading__link" href="#example-prerequisites">
        Example Prerequisites
    </a>
</h3><p>Since all of the Paketo application monitoring buildpacks support the Java programming languages we&rsquo;ll use the <a href="https://github.com/paketo-buildpacks/samples/tree/main/java">Java sample applications</a>.</p>
<p>To run the examples, clone the repository and change to the Java sample application directory.</p>
<div class="copyable">
    <pre class="copyable__code">git clone https://github.com/paketo-buildpacks/samples
cd samples/java
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
<p>Both of the examples assume that the <a href="https://paketo.io/docs/concepts/builders/#base">Paketo Base builder</a> is the default builder. If you haven&rsquo;t already, set it as the default now.</p>
<div class="copyable">
    <pre class="copyable__code">pack config default-builder paketobuildpacks/builder:base
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
<h3 id="example-with-a-binding" class="markup-heading">
    <a class="markup-heading__link" href="#example-with-a-binding">
        Example with a Binding
    </a>
</h3><p>Many of the APM tools require a binding to trigger the tools to be installed and to pass required credentials at runtime. This example uses Azure Application Insights which is one such APM tool.</p>
<ol>
<li>
<p><code>cd application-insights</code>.</p>
</li>
<li>
<p>Build an image with the Azure Application Insights Java Agent:</p>
<div class="copyable">
    <pre class="copyable__code">pack build samples/java --volume &#34;$(pwd)/binding:/platform/bindings/application-insights&#34;
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
</li>
<li>
<p>To connect to Azure Application Insights at runtime a valid <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/create-new-resource#copy-the-instrumentation-key">Instrumentation Key</a> is required.</p>
<div class="copyable">
    <pre class="copyable__code">echo &#34;&lt;Instrumentation Key&gt;&#34; &gt; binding/InstrumentationKey
docker run --rm --tty --publish 8080:8080 \
  --env SERVICE_BINDING_ROOT=/bindings \
  --volume &#34;$(pwd)/binding:/bindings/app-insights&#34; \
  samples/java
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
</li>
</ol>
<p>The application should now be running and you can access it with <code>curl -s http://localhost:8080/actuator/health | jq .</code> or through your browser. The agent should be collecting and reporting data. Allow time for data to be reported to your APM vendor and check the APM vendor&rsquo;s UI to confirm it&rsquo;s receiving data.</p>
<h3 id="example-with-an-environment-variable" class="markup-heading">
    <a class="markup-heading__link" href="#example-with-an-environment-variable">
        Example with an Environment Variable
    </a>
</h3><p>Some of the APM tools require an environment variable to trigger the tools to be installed and only require a binding to pass private credentials at runtime. This example uses Datadog which is one such APM tool.</p>
<ol>
<li>
<p><code>cd application-insights</code>.</p>
</li>
<li>
<p>Build an image with the Datadog Java Agent.</p>
<div class="copyable">
    <pre class="copyable__code">pack build samples/java -e BP_DATADOG_ENABLED=true
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
</li>
<li>
<p>Run the Datadog side-car agent. See <a href="#datadog">Datadog instructions above</a>. This is a specific requirement for Datadog, other APM vendors do not require this.</p>
</li>
<li>
<p><a href="https://docs.datadoghq.com/tracing/setup_overview/setup/java/?tab=containers#configuration">Configuration of the Datadog agent</a> is done through environment variables at runtime. Run the application image passing in any required Datadog configuration.</p>
<!-- raw HTML omitted -->
<div class="copyable">
    <pre class="copyable__code">docker run --rm --tty samples/java -e DD_SERVICE=foo-service -e DD_ENV=foo-env -e DD_VERSION=1.1.1
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
</li>
</ol>
<!-- raw HTML omitted -->
<p>The application should now be running and you can access it with <code>curl -s http://localhost:8080/actuator/health | jq .</code> or through your browser. In addition, the agent should be running now.</p>
<p>If you&rsquo;re using a profiler, you may connect by following the instructions in the section above for your profiler. If using a reporting agent, it should be collecting and reporting data now. Allow time for data to be reported to your APM vendor and check the APM vendor&rsquo;s UI to confirm it&rsquo;s receiving data.</p>
<h3 id="apm-buildpacks-with-paketo-builders" class="markup-heading">
    <a class="markup-heading__link" href="#apm-buildpacks-with-paketo-builders">
        APM Buildpacks with Paketo Builders
    </a>
</h3><p>Not all of the Paketo Application Monitoring buildpacks are presently included in the Paketo builders. At the moment, the builders include Azure Application Insights, Google Stackdriver, and Datadog.</p>
<p>We plan to add all of them in the future, but there are presently technical limitations around the maximum number of layers that can be added to the builder preventing more from being added to the builders. What you can do in the meantime is to manually include the APM buildpack that you would like to use at the end of the buildpack list.</p>
<!-- raw HTML omitted -->
<div class="copyable">
    <pre class="copyable__code">pack build samples/java --volume &#34;$(pwd)/binding:/platform/bindings/skywalking&#34; -b urn:cnb:builder:paketo-buildpacks/java -b paketo-buildpacks/apache-skywalking
</pre>
    <img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" />
    <div class="copyable__copied copied">Copied!</div>
</div>
<!-- raw HTML omitted -->
<p><strong>Note</strong>: it is important to use the <code>urn:cnb:builder:</code> reference so that the build uses the composite buildpack that already exists on the builder. If you reference a composite buildpack image, like <code>gcr.io/paketo-buildpacks/java</code> or <code>paketo-buildpacks/java</code>, this will result in downloading and adding that image to the builder, despite it already being there, which increases the layer count and can make the build fail.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

            </div>
            
  <a href="https://github.com/paketo-buildpacks/paketo-website/edit/main/content/docs/howto/app-monitor.md" target="_blank" class="github-edit" style="text-decoration:none">
    <div class="github-edit__content">
      <div class="github-edit__logo-container">
        <img class="github-edit__logo" src="/images/github-mark.png">
      </div>
        <div class="github-edit__text">Edit</div>
    </div>
</a>

            <p class="docs-mod-time"><strong>Last modified:</strong> October 26, 2022</p>
        </div>
        
<div class="docs-body__table-of-contents-container docs-body__table-of-contents-container--desktop">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#apache-skywalking">Apache Skywalking</a></li>
    <li><a href="#appdynamics">AppDynamics</a></li>
    <li><a href="#aternity">Aternity</a></li>
    <li><a href="#azure-application-insights">Azure Application Insights</a></li>
    <li><a href="#datadog">Datadog</a></li>
    <li><a href="#dynatrace">Dynatrace</a></li>
    <li><a href="#elastic-apm">Elastic APM</a></li>
    <li><a href="#google-stackdriver">Google Stackdriver</a>
      <ul>
        <li><a href="#stackdriver-debugger">Stackdriver Debugger</a></li>
        <li><a href="#stackdriver-profiler">Stackdriver Profiler</a></li>
      </ul>
    </li>
    <li><a href="#jprofiler">JProfiler</a>
      <ul>
        <li><a href="#connecting-with-jprofiler">Connecting with JProfiler</a></li>
      </ul>
    </li>
    <li><a href="#new-relic">New Relic</a></li>
    <li><a href="#yourkit">YourKit</a>
      <ul>
        <li><a href="#connecting-with-yourkit">Connecting with YourKit</a></li>
      </ul>
    </li>
    <li><a href="#examples">Examples</a>
      <ul>
        <li><a href="#example-prerequisites">Example Prerequisites</a></li>
        <li><a href="#example-with-a-binding">Example with a Binding</a></li>
        <li><a href="#example-with-an-environment-variable">Example with an Environment Variable</a></li>
        <li><a href="#apm-buildpacks-with-paketo-builders">APM Buildpacks with Paketo Builders</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>

    </div>
</div>


    <footer class="footer text--light">
    <div class="footer-social-links-container">
        <a class="footer-social-link" href="https://twitter.com/Paketo_io">
            <div class="footer-social-link__image-container">
                <div class="logo">
                    <img class="logo__image" src="/v2/images/logo-twitter.svg" alt="Blue Twitter bird logo">
                </div>
            </div>
            <div class="text--light text--400">
                Twitter
            </div>
        </a>
        <a class="footer-social-link" href="https://slack.paketo.io/">
            <div class="footer-social-link__image-container">
                <div class="logo">
                    <img class="logo__image" src="/v2/images/logo-slack.svg" alt="Slack logo">
                </div>
            </div>
            <div class="text--light text--400">
                Slack
            </div>
        </a>
        <a class="footer-social-link" href="https://github.com/paketo-buildpacks">
            <div class="footer-social-link__image-container">
                <div class="logo logo--github">
                    <img class="logo__image"  src="/v2/images/logo-github-cropped.svg" alt="GitHub Octocat logo"/>
                </div>
            </div>
            <div class="text--light text--400">
                GitHub
            </div>
        </a>
    </div>
    <div class="footer-privacy-policy">
        <div class="footer-text--small">Paketo Buildpacks is a <a class="text--light" href="https://www.cloudfoundry.org/">Cloud Foundry</a> Project</div>
        <img class="cloudfoundry-logo" src="/v2/images/logo-cloudfoundry-light.svg" alt="Cloud Foundry logo" />
        <a class="footer-text--small text--light" href="https://linuxfoundation.org/privacy-policy/">Privacy Policy</a>
    </div>
</footer><script src="/js/main.9c67a9fb381cc86826fbaa4f95e6ad822f45e0e017f5b13e23581803c5665884.js"></script>

    <div id="footer-skip-link" class="screenreader-container">
    <a href="#header-skip-link" class="screenreader-text">Skip to Header</a>
</div>

</body>

</html>
