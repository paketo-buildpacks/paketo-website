---
title: ".NET Core Buildpack Reference"
menu:
  main:
    parent: reference
    identifier: dotnet-core-reference
    name: ".NET Core Buildpack"
---

{{% reference_exec_summary bp_name="Paketo .NET Core buildpack" bp_repo="https://github.com/paketo-buildpacks/dotnet-core" howto_docs_path="/docs/howto/dotnet-core" %}}

## Supported Dependencies

The .NET Core Paketo buildpack supports several versions of the .NET Core Framework.
For more details on the specific versions supported in a given buildpack
version, see the [release
notes](https://github.com/paketo-buildpacks/dotnet-core/releases).

### SDK Version Selection

The `dotnet-core-sdk` buildpack will automatically determine the version based on the below priority order:

- `BP_DOTNET_SDK_VERSION` environment variable
  - This also also supports wildcards eg `9.0.*`
- `global.json` configuration file
  - Refer to [the .NET documentation](dotnet/global-json) for more on how version selection works
- `<RuntimeFrameworkVersion>` from the `.(cs|fs|vb)proj` file
- `<FrameworkVersion>` from the `.(cs|fs|vb)proj` file

If using a preview version of the SDK, you must set `BP_DOTNET_ENABLE_PRERELEASE=true` to enable pre-release support.

### ASP.NET Runtime Version Selection

The `dotnet-core-aspnet-runtime` buildpack will automatically determine the version  based on the below priority order:

- `BP_DOTNET_RUNTIME_VERSION` environment variable
  - This must be a specific version eg `10.0.1`
- `*.runtimeconfig.json` which is generated by `dotnet publish` for non-self-contained builds
  - If the specific version is not available, "roll-forward" behaviour will try to select next best patch release, followed by minor release
  - This can be disabled by setting environment variable `BP_DOTNET_ROLL_FORWARD=Disable`

## Supported Service Bindings

The .NET Core buildpack can be configured using [service bindings][service-binding].

| `type`                       | Required Files         | # Bindings of This Type Accepted |
|------------------------------|------------------------|----------------------------------|
| [`nugetconfig`][nugetconfig] | `type`, `nuget.config` | 0 or 1                           |

## Behavior

The Paketo .NET Core buildpack is a [composite buildpack][paketo/composite-buildpack] designed to build .NET Core applications in several different forms.

### Supported Application Types

The .NET Core buildpack supports several types of application source code that
can be built into a container image. Developers can provide raw source code, or
built artifacts like Framework-Dependent Deployments/Executables or
Self-Contained Deployments when building their application.

### Source Applications

The .NET Core buildpack is capable of building application source code
into Framework-Dependent Deployments (FDD) or Executables (FDE).  This is
achieved using the `dotnet publish` command. For .NET Core Framework 2.x
applications, [an FDD is
produced](https://docs.microsoft.com/en-us/dotnet/core/deploying/deploy-with-cli#framework-dependent-deployment)
as the default build artifact, while [an FDE is
produced](https://docs.microsoft.com/en-us/dotnet/core/deploying/deploy-with-cli#framework-dependent-executable)
when the application source is for .NET Core Framework 3.x. The buildpack sets the following `dotnet publish` flags by default:
- `--configuration Release`
- `--runtime linux-x64`
- `--self-contained false`
- `--output <temp-directory>`

See the dotnet CLI [documentation][dotnet/CLI-docs] for details about build configuration.

### Framework-Dependent Deployments or Framework-Dependent Executables

When building an application that has already been published as a
Framework-Dependent Deployment or Framework-Dependent Executable, the buildpack
will include the required .NET Core Framework dependencies and set the start
command.

### Self-Contained Deployment

When building an application as a [Self-Contained
Deployment](https://docs.microsoft.com/en-us/dotnet/core/deploying/deploy-with-cli#self-contained-deployment) (SCD),
the buildpack will ensure the correct start command will be used to run your
app. No .NET Core Framework dependencies will be included in the built image as
they are already included in the SCD artifact. 

## Buildpack-Set Environment Variables

### DOTNET_ROOT

The `DOTNET_ROOT` environment variable specifies the path to the directory where .NET Runtimes and SDKs are installed.

* Set by: `dotnet-core-aspnet-runtime` buildpack
* Phases: `launch`
* Value: path to the ASP.NET runtime root directory

### PATH

The `PATH` environment variable is modified to enable the `dotnet` CLI to be found during subsequent `build` and `launch` phases.

* Set by: `dotnet-core-sdk`
* Phases: `build` and `launch`
* Value: path the directory containing the `dotnet` executable

## Launch Process

The .NET Core buildpack will ensure that your application image is built
with a valid launch process command. These commands differ slightly depending
upon the type of built artifact produced during the build process.

For more information about which built artifact is produced for a Source
Application, see [this section]({{< relref "#supported-application-types" >}}).

### Framework-Dependent Deployments and Source Applications

For Framework-Dependent Deployments (FDD), the `dotnet` CLI will be invoked to
start your application. The application will be given configuration to help it
bind to a port inside the container. The default port is 8080, but can be
overridden using the `$PORT` environment variable.

{{< code/copyable >}}
dotnet myapp.dll --urls http://0.0.0.0:${PORT:-8080}
{{< /code/copyable >}}

### Self-Contained Deployment and Framework-Dependent Executables

For Self-Contained Deployments and Framework-Dependent Executables, the
executable will be invoked directly to start your application. The application
will be given configuration to help it bind to a port inside the container. The
default port is 8080, but can be overridden using the `$PORT` environment
variable.

{{< code/copyable >}}
./myapp --urls http://0.0.0.0:${PORT:-8080}
{{< /code/copyable >}}

## Software Bill of Materials

The .NET Core buildpack supports the full [software bill of
materials][concepts/SBOM] (SBOM) in [Syft][format/syft],
[CycloneDX][format/cyclonedx], and [SPDX][format/spdx] formats. The .NET Core
buildpack also includes limited support for the legacy
[Paketo-specific][format/paketo] SBOM format. This Paketo-specific SBOM format
does not include information about the application dependencies.

Check out the [Access the Software Bill of Materials
guide][how-to/SBOM] for more information about how to retrieve
the SBOM for your .NET Core app image.

<!-- References -->
<!-- spellchecker-disable -->
[paketo/composite-buildpack]:{{< ref "docs/concepts/buildpacks#composite-buildpacks" >}}
[dotnet/CLI-docs]:https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-publish
[dotnet/global-json]:https://learn.microsoft.com/en-us/dotnet/core/tools/global-json
[service-binding]:{{< ref "docs/howto/configuration#bindings" >}}
[nugetconfig]:{{< ref "docs/howto/dotnet-core#via-service-bindings" >}}
[format/cyclonedx]:https://cyclonedx.org/
[format/spdx]:https://spdx.dev/
[format/syft]:https://github.com/anchore/syft/tree/main/schema/json
[format/paketo]:{{< ref "docs/concepts/sbom#paketo-specific-sbom-format" >}}
[concepts/SBOM]:{{< ref "docs/concepts/sbom" >}}
[how-to/SBOM]:{{< ref "docs/howto/sbom" >}}
<!-- spellchecker-enable -->
